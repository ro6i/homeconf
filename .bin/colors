#!/bin/bash

print_fg() {
  declare -i items_in_line=0
  printf '  '
  for c in $(seq $1 $2)
  do
    tput setaf $c
    printf '[%03d]  ' "$c"
    items_in_line+=1
    if [[ $items_in_line -ge 8 ]]
    then
      items_in_line=0
      echo
      printf '  '
    fi
  done
}

print_bg_octet() {
  local fg
  printf '  '
  for c in $(seq $1 $(( $1 + 7 )) )
  do
    if [[ -z "$2" ]]
    then
      fg=0
    else
      fg=$(( $c + $2 ))
    fi
    printf "$(tput setab $c)$(tput setaf $fg)"
    printf ' %03d ' $fg
    printf "$(tput sgr0)  "
  done
  echo
}

print_bg_rel() {
  print_bg_octet $1            $2
  print_bg_octet $1            $(( $2 + 8 ))
  print_bg_octet $(( $1 + 8 )) $(( $2 - 8 ))
  print_bg_octet $(( $1 + 8 )) $2
}

print_bg_abs() {
  print_bg_octet $1
  print_bg_octet $1
  print_bg_octet $(( $1 + 8 ))
  print_bg_octet $(( $1 + 8 ))
}

echo "$(tput sgr0)"

print_fg 0 63
echo

print_bg_rel 16 -16
echo
print_bg_rel 16  32
echo
print_bg_abs 32
echo
